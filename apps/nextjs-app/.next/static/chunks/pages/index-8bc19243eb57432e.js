(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7079)}])},7079:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return b},default:function(){return m}});var n=r(2322),i=r(9966),s=r(7729),a=r.n(s),l=r(9857);let o=e=>{let{time:t}=e,r=new Date(t),i=(Date.now()-r.valueOf())/1e3,s=Math.floor(i/60);return(0,n.jsx)("div",{className:(e=>{switch(e){case 10:case 9:case 8:return"text-red-600";case 7:case 6:return"text-orange-400";default:return"text-emerald-500"}})(s),children:60>Math.floor(i)?"less than minute ago":"".concat(s," minutes ago")})},c=e=>{let{pilot:t}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[t.firstName," ",t.lastName]}),(0,n.jsx)("td",{children:t.email}),(0,n.jsx)("td",{children:t.phoneNumber}),(0,n.jsx)("td",{children:(0,n.jsx)(o,{time:t.updatedAt})})]})},d=e=>fetch(e).then(e=>e.json()),h=()=>{let{data:e,error:t}=(0,l.ZP)("/api/pilots",d,{refreshInterval:2e3});return t?(0,n.jsx)("code",{children:t}):(0,n.jsxs)("table",{className:"table-auto w-full text-left",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Email"}),(0,n.jsx)("th",{children:"Phone number"}),(0,n.jsx)("th",{children:"Last seen"})]})}),(0,n.jsx)("tbody",{children:null==e?void 0:e.sort(f).map(e=>(0,n.jsx)(c,{pilot:e},e.id))})]})},u=e=>{let t=new Date(e),r=(Date.now()-t.valueOf())/1e3;return r/60},f=(e,t)=>u(e.updatedAt)>u(t.updatedAt)?-1:u(e.updatedAt)<u(t.updatedAt)?1:0;var x=r(2784),j=r(8602);let p=e=>{let{width:t,height:r,drones:i}=e,s=(0,x.useRef)(null);return(0,x.useEffect)(()=>{if(s.current){let e=s.current,t=e.getContext("2d");null!=t&&(t.fillStyle="#fff",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.beginPath(),t.arc(250,250,.1,0,360,!1),t.strokeStyle="red",t.stroke(),t.lineWidth=5,t.closePath(),t.beginPath(),t.arc(250,250,125,0,360,!1),t.strokeStyle="pink",t.stroke(),t.lineWidth=5,t.closePath(),i&&i.forEach(e=>{t.beginPath(),t.arc(Math.floor(e.positionX/1e3),Math.floor(e.positionY/1e3),.1,0,360,!1),t.strokeStyle=(0,j.isDroneViolatingPerimiter)(Math.floor(e.positionX/1e3),Math.floor(e.positionY/1e3),250,500,500)?"pink":"black",t.stroke(),t.lineWidth=5,t.closePath()}))}},[i]),(0,n.jsx)("canvas",{ref:s,width:t,height:r})},v=e=>{let{width:t,height:r}=e,{data:i,error:s}=(0,l.ZP)("/api/drones",d,{refreshInterval:2e3});return s?(0,n.jsx)("div",{children:"Error"}):(0,n.jsx)(p,{width:t,height:r,drones:i})},_=e=>{let{pilots:t,drones:r}=e;return(0,n.jsx)(l.J$,{value:{fallback:{"api/pilots":t,"api/drones":r}},children:(0,n.jsxs)("div",{children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"Reaktor Birdnest"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(v,{width:500,height:500}),(0,n.jsx)("h1",{className:"text-2xl font-semibold mx-4",children:"Intruders list"}),(0,n.jsx)("div",{className:"w-full mx-4",children:(0,n.jsx)(h,{})})]})})};var b=!0,m=(0,i.withSuperJSONPage)(_)},1427:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPointDistance=void 0;let r=(e,t,r,n)=>Math.abs(e-r)+Math.abs(t-n);t.getPointDistance=r},8602:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(870),t),i(r(1427),t)},870:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDroneViolatingPerimiter=void 0;let n=r(1427),i=(e,t,r=1e5,i=25e4,s=25e4)=>{let a=(0,n.getPointDistance)(e,t,i,s);return a<=r/2};t.isDroneViolatingPerimiter=i}},function(e){e.O(0,[697,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);